<main class="main-content">
  @switch (activeView$ | async) {
    @case ('site') {
      <div class="iframe-container">
        <iframe
          *ngIf="selectedSiteUrl$ | async as url"
          [src]="url"
          frameborder="0"
          webkitallowfullscreen
          mozallowfullscreen
          allow="clipboard-read; clipboard-write; fullscreen; picture-in-picture;"
          (load)="onIframeLoaded()"
          (error)="onIframeError()"></iframe>

        <!-- חיווי טעינה -->
        <div class="loading-overlay" *ngIf="isLoading()">
          <div class="spinner"></div>
          <div class="loading-text">טוען...</div>
        </div>

        <div *ngIf="(selectedSiteUrl$ | async) === null" class="placeholder">
          <span>בחר ערוץ מהרשימה או הוסף ערוץ חדש</span>
        </div>
      </div>
    }

    <!-- כאן השינוי הגדול: שימוש בקומפוננטה אמיתית במקום הזרקת HTML -->
    @case ('help') {
      <div class="custom-content-wrapper">
        <app-help [initialSection]="(helpSection$ | async)"></app-help>
      </div>
    }

    @case ('custom') {
      <!-- עבור הדפים הישנים שעדיין משתמשים בטעינה חיצונית (Contact, Advertise) -->
      <div class="custom-content-wrapper" [innerHTML]="sanitizedCustomContent$ | async"></div>
    }

    @case ('advertise') {
       <div class="custom-content-wrapper" [innerHTML]="sanitizedCustomContent$ | async"></div>
    }

    @case ('contact') {
       <div class="custom-content-wrapper" [innerHTML]="sanitizedCustomContent$ | async"></div>
    }
  }
</main>
